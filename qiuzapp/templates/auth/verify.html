{% extends "layout/auth.html" %} {% block content %}
<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <h2 class="text-center mb-4">Verify OTP</h2>

      <form method="POST">
        {% csrf_token %}

        <div class="form-group">
          <label for="otp">Enter the 4-digit OTP</label>

          <!-- 4-digit OTP input -->
          <div class="d-flex justify-content-between">
            <input
              type="text"
              name="otp_1"
              class="form-control text-center otp-input {% if form.otp_1.errors %}is-invalid{% endif %}"
              maxlength="1"
              required
              pattern="[0-9]{1}"
              id="otp_1"
              autofocus
            />
            <input
              type="text"
              name="otp_2"
              class="form-control text-center otp-input {% if form.otp_2.errors %}is-invalid{% endif %}"
              maxlength="1"
              required
              pattern="[0-9]{1}"
              id="otp_2"
            />
            <input
              type="text"
              name="otp_3"
              class="form-control text-center otp-input {% if form.otp_3.errors %}is-invalid{% endif %}"
              maxlength="1"
              required
              pattern="[0-9]{1}"
              id="otp_3"
            />
            <input
              type="text"
              name="otp_4"
              class="form-control text-center otp-input {% if form.otp_4.errors %}is-invalid{% endif %}"
              maxlength="1"
              required
              pattern="[0-9]{1}"
              id="otp_4"
            />
          </div>
        </div>

        <button type="submit" class="btn btn-primary btn-block">
          Verify OTP
        </button>
      </form>

      <br />
      <p class="text-center">
        Didn't receive the OTP? <a href="#">Resend OTP</a>
      </p>
    </div>
  </div>
</div>

<!-- JavaScript for auto-focus on the next OTP field -->
<script>
  document.querySelectorAll(".otp-input").forEach((element, index, array) => {
    element.addEventListener("input", function (e) {
      if (this.value.length === this.maxLength) {
        if (index < array.length - 1) {
          array[index + 1].focus(); // Focus the next input field
        }
      }
    });
  });
</script>

{% endblock %}
